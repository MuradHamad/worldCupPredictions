---
phase: 5
plan: 01
type: auto
autonomous: true
wave: 1
depends_on: []
requirements: [PRED-01, PRED-02, PRED-03]
---

# Phase 5 Plan 01: Prediction Management

## Objective

Implement prediction management features including tournament start date configuration, countdown timer UI, and prediction locking mechanism after tournament begins.

## Context

This plan implements the final phase of the Global Cup Predictor application. The prediction management system needs to:
- Store tournament start date in configuration
- Display countdown timer showing time until predictions lock
- Lock predictions after tournament start date
- Show clear messaging when predictions are locked

## Tasks

### Task 1: Add Tournament Configuration
**Type:** auto
**Behavior:** Add tournament configuration to store start date and prediction deadline
**Implementation:** Create/update config file with tournament dates

**Files to create/modify:**
- `.planning/config.json` - Add tournamentStartDate and predictionDeadline fields

**Verification:**
- Config contains valid ISO date for tournament start
- Config contains prediction deadline (can be same as tournament start)

---

### Task 2: Create Countdown Timer Component
**Type:** auto
**Behavior:** Build reusable countdown timer component
**Implementation:** Create React component that displays time remaining until deadline

**Files to create:**
- `src/components/CountdownTimer.tsx` - Countdown timer component

**Verification:**
- Component accepts target date as prop
- Displays days, hours, minutes, seconds
- Updates every second
- Shows "Predictions Closed" when deadline passed

---

### Task 3: Integrate Countdown Timer into Pages
**Type:** auto
**Behavior:** Add countdown timer to dashboard, summary, and prediction pages
**Implementation:** Import and place CountdownTimer component in header area

**Files to modify:**
- `src/app/dashboard/page.tsx` - Add countdown timer
- `src/app/summary/page.tsx` - Add countdown timer  
- `src/app/groups/page.tsx` - Add countdown timer with lock state
- `src/app/knockouts/page.tsx` - Add countdown timer with lock state

**Verification:**
- Countdown timer visible on all prediction pages
- Timer updates in real-time
- Deadline passed shows appropriate message

---

### Task 4: Implement Prediction Locking Logic
**Type:** auto
**Behavior:** Disable edit functionality after prediction deadline
**Implementation:** Add check for deadline in prediction pages, disable form submissions

**Files to modify:**
- `src/app/groups/page.tsx` - Disable team ordering after deadline
- `src/app/knockouts/page.tsx` - Disable winner selection after deadline
- `src/app/api/predictions/route.ts` - Validate deadline on server

**Verification:**
- Edit buttons disabled after deadline
- Form submissions blocked server-side after deadline
- Clear "Predictions Locked" message displayed

---

### Task 5: Add Lock Status to Summary Page
**Type:** auto
**Behavior:** Show prediction lock status on summary page
**Implementation:** Add lock indicator and countdown to summary page

**Files to modify:**
- `src/app/summary/page.tsx` - Add lock status indicator

**Verification:**
- Lock status clearly visible
- Countdown shows time remaining (or "Locked" message)

---

## Success Criteria

1. Tournament start date stored in config
2. UI shows countdown to prediction deadline on all prediction pages
3. Edit button disabled after deadline passes
4. Clear messaging when predictions are locked
5. Server-side validation prevents edits after deadline

## Output Specification

Create phase-5-01-SUMMARY.md with:
- Phase number and plan number
- Tasks completed
- Files created/modified
- Any deviations from plan
- Self-check verification results
